

## Java 字节码参考

表格参考：https://docs.oracle.com/javase/specs/jvms/se10/html/jvms-6.html#jvms-6.5



| 字节码       | 对应 byte 值                                                 | 需要操作栈中的数据类型                                    | 调用格式                                  | 后跟数据字节数 | 释义                                                         | 备注                                                         |
| ------------ | ------------------------------------------------------------ | --------------------------------------------------------- | ----------------------------------------- | -------------- | ------------------------------------------------------------ | ------------------------------------------------------------ |
| aaload       | 0x32                                                         | 出栈元素：<br />arrayref, index<br />入栈元素：refvalue   | aaload                                    | 0              | 取出栈顶的元素类型为引用的数组和下面一个 int 值，得到该数组中下标为 index 的引用值元素 value，将value 元素 push 到操作数栈顶 | 1、如果 arrayref 为 null, 抛出 NullPointException 异常，<br />2、如果 index 越界，抛出 ArrayIndexOutOfBoundsException 异常 |
| aastore      | 0x53                                                         | 出栈元素：<br />arrayref, index, value                    | aastore                                   | 0              | 和 aaload 对立，取出操作数栈中最上层的三个元素（arrayref、index、value），将 value 储存到 arrayref 数组中下标为 index 的位置 | 1、如果 arrayref 为 null, 抛出 NullPointException 异常，<br />2、如果 index 越界，抛出 ArrayIndexOutOfBoundsException 异常。<br />3、如果 value 的类型和数组元素类型不符，抛出 ArrayStoreException |
| aconst_null  | 0x1                                                          | 入栈元素：<br />null                                      | aconst_null                               |                | 将 null 引用值 push 到操作数栈顶                             |                                                              |
| aload        | 0x19                                                         | 入栈元素：<br />objectref                                 | aload index                               | 1              | 将方法栈帧中本地变量表中下标为 index 的**引用值** push 到操作数栈顶 | 该指令可以和 wide 指令配合使用，使得其后跟数据字节数变为 2，即此时 index 占用的字节数为 2 |
| aload_\<n\>  | aload_0=0x2a<br />aload_1=0x2b<br />aload_2=0x2c<br />aload_3=0x2d | 入栈元素：<br />value                                     | aload_\<n\>                               | 0              | 加载当前栈帧本地变量表中下标为 n(0,1,2,3) 的引用值并 push 到操作数栈中 | 每个aload_\<n\>指令都与索引为<n>的aload相同，只是操作数通过\<n\>指定了 |
| anewarray    | 0xbd                                                         | 出栈元素：<br />count<br />入栈元素：<br />arrayref       | anewarray<br/>indexbyte1<br/>indexbyte2   | 2              | 创建一个长度为 count 的数组，元素类型由(indexbyte1<<8)\|indexbyte2 为下标指向的常量池中的元素所代表的类型（Class、Array、Interface）决定 | 1、在解析数组元素类型时，可能会抛出异常；<br />2、如果count 值小于 0，则抛出 NegativeArraySizeException 异常 |
| areturn      | 0xb0                                                         | 出栈元素：<br />refvalue                                  | areturn                                   | 0              | 将当前方法栈顶的引用值弹出，结束该方法运行，弹出的返回值会 push 到调用方法的操作数栈顶 |                                                              |
| arraylength  | 0xbe                                                         | 出栈元素：<br />arrayref<br />入栈元素：<br />length      | arraylength                               | 0              | 获取栈顶引用 arrayref 指向数组的长度，length 会作为一个 int 类型元素 push 到操作数栈中 | 如果 arrayref 为 null，则抛出一个 NullPointerException       |
| astore       | 0x3a                                                         | 出栈元素：<br />objectref                                 | astore<br />index                         | 1              | 将操作数栈顶的引用元素出栈，并储存到本地变量表中下标为 index 的格子中 | 1、可以和 wide 指令配合使用使得后跟占用两个字节内存宽度的 index 数据。<br />2、和 aload 指令的区别在于 astore 指令可以操作 returnAddress 类型的元素，而 aload 指令不可以，这是有意设计成这样的 |
| astore_\<n\> | astore_0=0x4b<br />astore_1=0x4c<br />astore_2=0x4d<br />astore_3=0x4e | 出栈元素：<br />objectref                                 | astore_\<n\>                              | 0              | 将操作数栈顶的引用元素出栈，并储存到本地变量表中下标为 index 的格子中 | 和 astore 类似，不过 astore 指令后面的 index 被 \<n\>(0,1,2,3) 的具体值代替了 |
| athrow       | 0xbf                                                         | 出栈元素：<br />objectref<br />入栈元素：<br />objectref  | athrow                                    | 0              | 抛出异常的指令，要求栈顶元素必须是指向一个 Throwable 类对象的引用。异常抛出后，会进行 catch handler 的查找，如果找到了对应的处理者，会清空操作数栈，并将该 objectref 重新入栈，线程的 pc 计数器会设置为异常处理的指令行，开始执行异常处理逻辑。如果在该方法中没有匹配到异常处理者，则将异常抛给方法的调用者。<br />如果这个异常最终没有被处理，则虚拟机会中止该方法的调用线程。 | The operand stack diagram for the *athrow* instruction may be misleading: If a handler for this exception is matched in the current method, the *athrow* instruction discards all the values on the operand stack, then pushes the thrown object onto the operand stack. However, if no handler is matched in the current method and the exception is thrown farther up the method invocation chain, then the operand stack of the method (if any) that handles the exception is cleared and *objectref* is pushed onto that empty operand stack. All intervening frames from the method that threw the exception up to, but not including, the method that handles the exception are discarded. |
| baload       | 0x33                                                         | 出栈元素：<br />arrayref,index<br />入栈元素：<br />value | baload                                    | 0              | 用于从栈顶的 boolean/byte 数组中加载下标为 index ，类型为 boolean/byte 的元素指令。要求栈顶的数组元素类型必须为 boolean/byte 类型 | 1、用于从元素类型为 boolean/byte 的数组中加载元素的指令<br />2、如果 arrayref 为 null，则抛出 NullPointerException 异常。<br />3、如果 index 越界，抛出 ArrayIndexOutOfBoundsException 异常 |
| bastore      | 0x54                                                         | 出栈元素：<br />arrayref,index,value                      | bastore                                   | 0              | 和 baload 对立，该指令将 value 存入 arrayref 数组中，储存下标为 index。value 和 arrayref 必须为同类型并且为 boolean/byte 类型 | 1、如果 arrayref 为 null，则抛出 NullPointerException 异常。<br />2、如果 index 越界，抛出 ArrayIndexOutOfBoundsException 异常 |
| bipush       | 0x10                                                         | 入栈元素：<br />value                                     | bipush<br />byte                          | 1              | 将指令后面的一个 byte 代表的直接值(不引用到常量池)以带符号形式转换为 int 类型值并 push 到操作数栈中 |                                                              |
| caload       | 0x34                                                         | 出栈元素：<br />arrayref,index<br />入栈元素：<br />value | caload                                    | 0              | arrayref 为 char 类型数组。index 为 int 类型值。从 char 类型数组中加载下标为 index 的 char 类型元素 value，将value 无符号转换为 int，并将元素值 push 到操作数栈顶 | 1、如果 arrayref 为 null，抛出 NullPointerException<br />2、如果 index 越界，抛出 ArrayOutOfIndexBoundsException |
| castore      | 0x55                                                         | 出栈元素：<br />arrayref,index,value                      | castore                                   | 0              | 将 int 类型元素 value 转换为  char 类型并存入 arrayref 指向的数组中下标为 index 的位置 | 1、如果 arrayref 为 null，抛出 NullPointerException<br />2、如果 index 越界，抛出 ArrayOutOfIndexBoundsException |
| checkcast    | 0xc0                                                         | 出栈元素：<br />objectref<br />入栈元素：<br />objectref  | checkcast<br />indexbyte1<br />indexbyte2 | 2              | 检查栈顶引用对象是否是常量池中下标为(index1<<8)\|indexbyte2 的常量所代表的类型/子类/接口实现类，如果是，则将该对象引用入栈，否则抛出 ClassCastException 异常 | 和 instanceof 指令的不同在于当当前检测的引用对象为 null 时的处理方式，checkcast 会抛出 ClassCastException 异常，而 instanceof 只会 push 一个 0 到当前操作数栈顶（表示false，即 null 不属于任何类型的对象实例） |
| d2f          | 0x90                                                         | 出栈元素：<br />value<br />入栈元素：<br />result         | d2f                                       | 0              | 将操作数栈顶的 double 类型的元素值出栈，并且将其安装 IEEE754 标准转换为 float 类型元素值，并且将转换后的值push 到操作数栈顶，该操作可能导致浮点数数据精度丢失 | A finite *value* too small to be represented as a `float` is converted to a zero of the same sign; a finite *value* too large to be represented as a `float` is converted to an infinity of the same sign. A `double` NaN is converted to a `float` NaN. |
| d2i          | 0x8e                                                         | 出栈元素：<br />value<br />入栈元素：<br />result         | d2i                                       | 0              | 将操作数栈顶的 double 类型的元素值出栈，并且将其转换为 int 类型元素值，并且将转换后的值 push 到操作数栈顶，该操作会去掉浮点数中的小数部分数据 | If the *value*' is NaN, the *result* of the conversion is an `int` 0. Otherwise, if the *value*' is not an infinity, it is rounded to an integer value V, rounding towards zero using IEEE 754 round towards zero mode. If this integer value V can be represented as an `int`, then the result is the `int` value V. Otherwise, either the *value*' must be too small (a negative value of large magnitude or negative infinity), and the *result* is the smallest representable value of type `int`, or the *value*' must be too large (a positive value of large magnitude or positive infinity), and the *result* is the largest representable value of type `int`. |
| dadd         | 0x63                                                         | 出栈元素：<br />value1,value2<br />入栈元素：<br />result | dadd                                      | 0              | 将栈顶的两个 double 类型的浮点数出栈并且相加，然后将结果 push 到操作数栈顶 | If either *value1*' or *value2*' is NaN, the result is NaN. The sum of two infinities of opposite sign is NaN. The sum of two infinities of the same sign is the infinity of that sign. The sum of an infinity and any finite value is equal to the infinity. The sum of two zeroes of opposite sign is positive zero. The sum of two zeroes of the same sign is the zero of that sign. The sum of a zero and a nonzero finite value is equal to the nonzero value. The sum of two nonzero finite values of the same magnitude and opposite sign is positive zero. In the remaining cases, where neither operand is an infinity, a zero, or NaN and the values have the same sign or have different magnitudes, the sum is computed and rounded to the nearest representable value using IEEE 754 round to nearest mode. If the magnitude is too large to represent as a `double`, we say the operation overflows; the result is then an infinity of appropriate sign. If the magnitude is too small to represent as a `double`, we say the operation underflows; the result is then a zero of appropriate sign. |
| daload       | 0x31                                                         | 出栈元素：<br />arrayref,index<br />入栈元素：<br />value | daload                                    | 0              | 从操作数栈顶元素类型为 double 的数组中取出下标为 index 的元素值，并将这个值 push 到操作数栈顶 | 1、如果 arrayref 为 null，抛出一个 NullPointerException 异常。<br />2、如果 index 越界，抛出 ArrayIndexOutOfBoundsException 异常。 |
| dcmp<op\>    | dcmpg=0x98<br />dcmpl=0x97                                   | 出栈元素：value1,value2<br />入栈元素：<br />result       | dcmp<op\>                                 | 0              | 比较操作数栈顶的两个 double 类型的元素，如果 value1 大于 value2，则 push int 类型常量：1进入操作数栈顶。如果value1 等于 value2，则push int 类型常量：0进入操作数栈顶。如果 value1 小于 value2，则 push int 类型常量：-1 进入操作数栈顶。<br />如果 value1 或者 value2 为NAN，dcmpg 指令push int 类型常量 1 进入操作数栈顶。，dcmpl 指令 push int 类型常量 -1 进入操作数栈顶。 | The *dcmpg* and *dcmpl* instructions differ only in their treatment of a comparison involving NaN. NaN is unordered, so any `double` comparison fails if either or both of its operands are NaN. With both *dcmpg* and *dcmpl* available, any `double` comparison may be compiled to push the same *result* onto the operand stack whether the comparison fails on non-NaN values or fails because it encountered a NaN. |
|              |                                                              |                                                           |                                           |                |                                                              |                                                              |
|              |                                                              |                                                           |                                           |                |                                                              |                                                              |
|              |                                                              |                                                           |                                           |                |                                                              |                                                              |
|              |                                                              |                                                           |                                           |                |                                                              |                                                              |
|              |                                                              |                                                           |                                           |                |                                                              |                                                              |
|              |                                                              |                                                           |                                           |                |                                                              |                                                              |
|              |                                                              |                                                           |                                           |                |                                                              |                                                              |
|              |                                                              |                                                           |                                           |                |                                                              |                                                              |
|              |                                                              |                                                           |                                           |                |                                                              |                                                              |
|              |                                                              |                                                           |                                           |                |                                                              |                                                              |
|              |                                                              |                                                           |                                           |                |                                                              |                                                              |
|              |                                                              |                                                           |                                           |                |                                                              |                                                              |
|              |                                                              |                                                           |                                           |                |                                                              |                                                              |
|              |                                                              |                                                           |                                           |                |                                                              |                                                              |
|              |                                                              |                                                           |                                           |                |                                                              |                                                              |
|              |                                                              |                                                           |                                           |                |                                                              |                                                              |
|              |                                                              |                                                           |                                           |                |                                                              |                                                              |
|              |                                                              |                                                           |                                           |                |                                                              |                                                              |
|              |                                                              |                                                           |                                           |                |                                                              |                                                              |
|              |                                                              |                                                           |                                           |                |                                                              |                                                              |
|              |                                                              |                                                           |                                           |                |                                                              |                                                              |
|              |                                                              |                                                           |                                           |                |                                                              |                                                              |
|              |                                                              |                                                           |                                           |                |                                                              |                                                              |
|              |                                                              |                                                           |                                           |                |                                                              |                                                              |
|              |                                                              |                                                           |                                           |                |                                                              |                                                              |
|              |                                                              |                                                           |                                           |                |                                                              |                                                              |
|              |                                                              |                                                           |                                           |                |                                                              |                                                              |
|              |                                                              |                                                           |                                           |                |                                                              |                                                              |
|              |                                                              |                                                           |                                           |                |                                                              |                                                              |
|              |                                                              |                                                           |                                           |                |                                                              |                                                              |
|              |                                                              |                                                           |                                           |                |                                                              |                                                              |
|              |                                                              |                                                           |                                           |                |                                                              |                                                              |
|              |                                                              |                                                           |                                           |                |                                                              |                                                              |
|              |                                                              |                                                           |                                           |                |                                                              |                                                              |
|              |                                                              |                                                           |                                           |                |                                                              |                                                              |
|              |                                                              |                                                           |                                           |                |                                                              |                                                              |
|              |                                                              |                                                           |                                           |                |                                                              |                                                              |
|              |                                                              |                                                           |                                           |                |                                                              |                                                              |
|              |                                                              |                                                           |                                           |                |                                                              |                                                              |
|              |                                                              |                                                           |                                           |                |                                                              |                                                              |
|              |                                                              |                                                           |                                           |                |                                                              |                                                              |
|              |                                                              |                                                           |                                           |                |                                                              |                                                              |
|              |                                                              |                                                           |                                           |                |                                                              |                                                              |
|              |                                                              |                                                           |                                           |                |                                                              |                                                              |
|              |                                                              |                                                           |                                           |                |                                                              |                                                              |
|              |                                                              |                                                           |                                           |                |                                                              |                                                              |
|              |                                                              |                                                           |                                           |                |                                                              |                                                              |
|              |                                                              |                                                           |                                           |                |                                                              |                                                              |
|              |                                                              |                                                           |                                           |                |                                                              |                                                              |
|              |                                                              |                                                           |                                           |                |                                                              |                                                              |
|              |                                                              |                                                           |                                           |                |                                                              |                                                              |
|              |                                                              |                                                           |                                           |                |                                                              |                                                              |
|              |                                                              |                                                           |                                           |                |                                                              |                                                              |
|              |                                                              |                                                           |                                           |                |                                                              |                                                              |
|              |                                                              |                                                           |                                           |                |                                                              |                                                              |
|              |                                                              |                                                           |                                           |                |                                                              |                                                              |
|              |                                                              |                                                           |                                           |                |                                                              |                                                              |
|              |                                                              |                                                           |                                           |                |                                                              |                                                              |
|              |                                                              |                                                           |                                           |                |                                                              |                                                              |
|              |                                                              |                                                           |                                           |                |                                                              |                                                              |
|              |                                                              |                                                           |                                           |                |                                                              |                                                              |
|              |                                                              |                                                           |                                           |                |                                                              |                                                              |
|              |                                                              |                                                           |                                           |                |                                                              |                                                              |
|              |                                                              |                                                           |                                           |                |                                                              |                                                              |
|              |                                                              |                                                           |                                           |                |                                                              |                                                              |
|              |                                                              |                                                           |                                           |                |                                                              |                                                              |
|              |                                                              |                                                           |                                           |                |                                                              |                                                              |
|              |                                                              |                                                           |                                           |                |                                                              |                                                              |
|              |                                                              |                                                           |                                           |                |                                                              |                                                              |
|              |                                                              |                                                           |                                           |                |                                                              |                                                              |
|              |                                                              |                                                           |                                           |                |                                                              |                                                              |
|              |                                                              |                                                           |                                           |                |                                                              |                                                              |
|              |                                                              |                                                           |                                           |                |                                                              |                                                              |
|              |                                                              |                                                           |                                           |                |                                                              |                                                              |
|              |                                                              |                                                           |                                           |                |                                                              |                                                              |
|              |                                                              |                                                           |                                           |                |                                                              |                                                              |
|              |                                                              |                                                           |                                           |                |                                                              |                                                              |
|              |                                                              |                                                           |                                           |                |                                                              |                                                              |





